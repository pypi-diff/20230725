# Comparing `tmp/odoo_addon_base_rest_pydantic-16.0.1.0.0.2-py3-none-any.whl.zip` & `tmp/odoo_addon_base_rest_pydantic-16.0.2.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,20 +1,20 @@
-Zip file size: 26119 bytes, number of entries: 18
--rw-r--r--  2.0 unx     3690 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/README.rst
--rw-r--r--  2.0 unx       22 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/__init__.py
--rw-r--r--  2.0 unx      520 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/__manifest__.py
--rw-r--r--  2.0 unx     8122 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/restapi.py
--rw-r--r--  2.0 unx      630 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/i18n/base_rest_datamodel.pot
--rw-r--r--  2.0 unx     1049 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/i18n/base_rest_pydantic.pot
--rw-r--r--  2.0 unx       44 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      100 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      962 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/static/description/icon.png
--rw-r--r--  2.0 unx    15002 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/static/description/index.html
--rw-r--r--  2.0 unx       59 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/tests/__init__.py
--rw-r--r--  2.0 unx     2246 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/tests/test_from_params.py
--rw-r--r--  2.0 unx     1385 b- defN 23-Jan-26 15:53 odoo/addons/base_rest_pydantic/tests/test_response.py
--rw-r--r--  2.0 unx     4331 b- defN 23-Jan-26 15:54 odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jan-26 15:54 odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jan-26 15:54 odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1918 b- defN 23-Jan-26 15:54 odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/RECORD
-18 files, 49632 bytes uncompressed, 22809 bytes compressed:  54.0%
+Zip file size: 26270 bytes, number of entries: 18
+-rw-r--r--  2.0 unx     3690 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/README.rst
+-rw-r--r--  2.0 unx       22 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/__init__.py
+-rw-r--r--  2.0 unx      527 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/__manifest__.py
+-rw-r--r--  2.0 unx     8438 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/restapi.py
+-rw-r--r--  2.0 unx      630 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/i18n/base_rest_datamodel.pot
+-rw-r--r--  2.0 unx     1046 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/i18n/base_rest_pydantic.pot
+-rw-r--r--  2.0 unx       44 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      100 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      962 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/static/description/icon.png
+-rw-r--r--  2.0 unx    15002 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/static/description/index.html
+-rw-r--r--  2.0 unx       59 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/tests/__init__.py
+-rw-r--r--  2.0 unx     2370 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/tests/test_from_params.py
+-rw-r--r--  2.0 unx     1674 b- defN 23-Jul-25 16:11 odoo/addons/base_rest_pydantic/tests/test_response.py
+-rw-r--r--  2.0 unx     4339 b- defN 23-Jul-25 16:11 odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-25 16:11 odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-25 16:11 odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1910 b- defN 23-Jul-25 16:11 odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/RECORD
+18 files, 50365 bytes uncompressed, 22976 bytes compressed:  54.4%
```

## zipnote {}

```diff
@@ -36,20 +36,20 @@
 
 Filename: odoo/addons/base_rest_pydantic/tests/test_from_params.py
 Comment: 
 
 Filename: odoo/addons/base_rest_pydantic/tests/test_response.py
 Comment: 
 
-Filename: odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/METADATA
+Filename: odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/WHEEL
+Filename: odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/top_level.txt
+Filename: odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/RECORD
+Filename: odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/base_rest_pydantic/__manifest__.py

```diff
@@ -1,19 +1,19 @@
 # Copyright 2021 ACSONE SA/NV
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 
 {
     "name": "Base Rest Datamodel",
     "summary": """
         Pydantic binding for base_rest""",
-    "version": "16.0.1.0.0",
+    "version": "16.0.2.0.0",
     "license": "LGPL-3",
     "author": "ACSONE SA/NV,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/rest-framework",
     "depends": ["base_rest"],
     "installable": True,
     "external_dependencies": {
         "python": [
-            "pydantic",
+            "pydantic>=2.0.0",
         ]
     },
 }
```

## odoo/addons/base_rest_pydantic/restapi.py

```diff
@@ -1,16 +1,17 @@
 # Copyright 2021 ACSONE SA/NV
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl).
+import json
 
 from odoo import _
 from odoo.exceptions import UserError
 
 from odoo.addons.base_rest import restapi
 
-from pydantic import BaseModel, ValidationError, validate_model
+from pydantic import BaseModel, ValidationError
 
 
 def replace_ref_in_schema(item, original_schema):
     if isinstance(item, list):
         return [replace_ref_in_schema(i, original_schema) for i in item]
     elif isinstance(item, dict):
         if list(item.keys()) == ["$ref"]:
@@ -40,25 +41,32 @@
         try:
             return self._model_cls(**params)
         except ValidationError as ve:
             raise UserError(_("BadRequest %s") % ve.json(indent=0)) from ve
 
     def to_response(self, service, result):
         # do we really need to validate the instance????
-        json_dict = result.dict()
-        to_validate = (
-            json_dict if not result.__config__.orm_mode else result.dict(by_alias=True)
-        )
-        *_, validation_error = validate_model(self._model_cls, to_validate)
-        if validation_error:
-            raise SystemError(_("Invalid Response %s") % validation_error)
+        json_dict = result.model_dump()
+        orm_mode = result.model_config.get("from_attributes", None)
+        to_validate = json_dict if orm_mode else result.model_dump(by_alias=True)
+        # Ensure that to_validate is under json format
+        try:
+            json.loads(to_validate)
+            to_validate_jsonified = to_validate
+        except TypeError:
+            to_validate_jsonified = json.dumps(to_validate)
+
+        try:
+            self._model_cls.model_validate_json(to_validate_jsonified)
+        except ValidationError as validation_error:
+            raise SystemError(_("Invalid Response")) from validation_error
         return json_dict
 
     def to_openapi_query_parameters(self, servic, spec):
-        json_schema = self._model_cls.schema()
+        json_schema = self._model_cls.model_json_schema()
         parameters = []
         for prop, spec in list(json_schema["properties"].items()):
             params = {
                 "name": prop,
                 "in": "query",
                 "required": prop in json_schema.get("required", []),
                 "allowEmptyValue": spec.get("nullable", False),
@@ -102,18 +110,18 @@
                         "schema": self.to_json_schema(service, spec, "output")
                     }
                 }
             }
         }
 
     def to_json_schema(self, service, spec, direction):
-        schema = self._model_cls.schema()
+        schema = self._model_cls.model_json_schema()
         schema_name = schema["title"]
         if schema_name not in spec.components.schemas:
-            definitions = schema.get("definitions", {})
+            definitions = schema.get("$defs", {})
             for name, sch in definitions.items():
                 if name in spec.components.schemas:
                     continue
                 sch = replace_ref_in_schema(sch, sch)
                 spec.components.schema(name, sch)
             schema = replace_ref_in_schema(schema, schema)
             spec.components.schema(schema_name, schema)
```

## odoo/addons/base_rest_pydantic/i18n/base_rest_pydantic.pot

```diff
@@ -34,9 +34,9 @@
 msgid "BadRequest: Too many items in the list (%(current)s > %(expected)s)"
 msgstr ""
 
 #. module: base_rest_pydantic
 #. odoo-python
 #: code:addons/base_rest_pydantic/restapi.py:0
 #, python-format
-msgid "Invalid Response %s"
+msgid "Invalid Response"
 msgstr ""
```

## odoo/addons/base_rest_pydantic/tests/test_from_params.py

```diff
@@ -29,32 +29,41 @@
         )
         restapi_pydantic = restapi_pydantic_cls(pydantic_cls, **kwargs)
         mock_service = mock.Mock()
         mock_service.env = self.env
         return restapi_pydantic.from_params(mock_service, params)
 
     def test_from_params(self):
-        params = {"name": "Instance Name", "description": "Instance Description"}
+        params = {
+            "name": "Instance Name",
+            "description": "Instance Description",
+        }
         instance = self._from_params(self.Model1, params)
         self.assertEqual(instance.name, params["name"])
         self.assertEqual(instance.description, params["description"])
 
     def test_from_params_missing_optional_field(self):
         params = {"name": "Instance Name"}
         instance = self._from_params(self.Model1, params)
         self.assertEqual(instance.name, params["name"])
         self.assertIsNone(instance.description)
 
     def test_from_params_missing_required_field(self):
-        msg = r"value_error.missing"
+        msg = r"Field required"
         with self.assertRaisesRegex(UserError, msg):
             self._from_params(self.Model1, {"description": "Instance Description"})
 
     def test_from_params_pydantic_model_list(self):
         params = [
-            {"name": "Instance Name", "description": "Instance Description"},
-            {"name": "Instance Name 2", "description": "Instance Description 2"},
+            {
+                "name": "Instance Name",
+                "description": "Instance Description",
+            },
+            {
+                "name": "Instance Name 2",
+                "description": "Instance Description 2",
+            },
         ]
         instances = self._from_params(self.Model1, params)
         self.assertEqual(len(instances), 2)
         self.assertEqual(instances[0].name, params[0]["name"])
         self.assertEqual(instances[0].description, params[0]["description"])
```

## odoo/addons/base_rest_pydantic/tests/test_response.py

```diff
@@ -27,15 +27,24 @@
         class Model1(BaseModel):
             name: str
 
         instance = Model1(name="Instance 1")
         res = self._to_response(instance)
         self.assertEqual(res["name"], instance.name)
 
+    def test_to_response_validation_failed(self):
+        class Model1(BaseModel):
+            name: str = None
+
+        instance = Model1(named="Instance 1")
+        msg = r"Invalid Response"
+        with self.assertRaisesRegex(SystemError, msg):
+            self._to_response(instance)
+
     def test_to_response_list(self):
         class Model1(BaseModel):
             name: str
 
-        instances = (Model1(name="Instance 1"), Model1(name="Instance 2"))
+        instances = [Model1(name="Instance 1"), Model1(name="Instance 2")]
         res = self._to_response_list(instances)
         self.assertEqual(len(res), 2)
         self.assertSetEqual({r["name"] for r in res}, {"Instance 1", "Instance 2"})
```

## Comparing `odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/METADATA` & `odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,24 +1,24 @@
 Metadata-Version: 2.1
 Name: odoo-addon-base-rest-pydantic
-Version: 16.0.1.0.0.2
+Version: 16.0.2.0.0
 Summary: Pydantic binding for base_rest
 Home-page: https://github.com/OCA/rest-framework
 Author: ACSONE SA/NV,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)
 Requires-Python: >=3.10
 Requires-Dist: odoo-addon-base-rest (<16.1dev,>=16.0dev)
 Requires-Dist: odoo (<16.1dev,>=16.0a)
-Requires-Dist: pydantic
+Requires-Dist: pydantic (>=2.0.0)
 
 ===================
 Base Rest Datamodel
 ===================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
```

## Comparing `odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/RECORD` & `odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/RECORD`

 * *Files 20% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 odoo/addons/base_rest_pydantic/README.rst,sha256=w60lA2CdUforyrJBZ_Zag8BWee2OxNjSf2_tkA6A6og,3690
 odoo/addons/base_rest_pydantic/__init__.py,sha256=g3OgzUIGmAJyVIzqkmxN4QEpvVuwpUWa2LpOYB6pGRc,22
-odoo/addons/base_rest_pydantic/__manifest__.py,sha256=p1nG0hTlijGj-BXt_MwbCvEC8uDZR0Kcz0ALZ3tMzgE,520
-odoo/addons/base_rest_pydantic/restapi.py,sha256=a93nFXPM3jFy08Umz-oFRidOXwCeH257inOHFlejIjE,8122
+odoo/addons/base_rest_pydantic/__manifest__.py,sha256=cksGufOVAGAg_uo3n1jhOw-L_NfJrbOqzO741Yehtr8,527
+odoo/addons/base_rest_pydantic/restapi.py,sha256=u0Pr4dNDoFGjxoHg6EjynfSDVmlk3H1KnYLCHECMFmk,8438
 odoo/addons/base_rest_pydantic/i18n/base_rest_datamodel.pot,sha256=CJ3JmttcP7ZGIu2_gOBUVDJwjHTFNr5rft1IvV7aX08,630
-odoo/addons/base_rest_pydantic/i18n/base_rest_pydantic.pot,sha256=6PY0O_7lwV3sHPf5GHrjoZA_wUq1Yke7OVxuaP-14iY,1049
+odoo/addons/base_rest_pydantic/i18n/base_rest_pydantic.pot,sha256=eHalkROvUVIrHCkliGMP84gatZteRXQg38PsyyCaD-U,1046
 odoo/addons/base_rest_pydantic/readme/CONTRIBUTORS.rst,sha256=RqZZFJ_WyebKrBztRG56MCIHBnSryLzhaxlXepsfhVg,44
 odoo/addons/base_rest_pydantic/readme/DESCRIPTION.rst,sha256=BY9ss6cmJgS9UyxM5rWJmfU57NKj4wbFbNGEOsCjJqU,100
 odoo/addons/base_rest_pydantic/readme/USAGE.rst,sha256=RBPyyFyMFJUYyo4zhzslSkN0tgHp_Skwpb0H-WC0X9k,962
 odoo/addons/base_rest_pydantic/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/base_rest_pydantic/static/description/index.html,sha256=yA8zH_Lj1dYLI2t0n7yov36KF1m2P1oLmgoj2RrxW7s,15002
 odoo/addons/base_rest_pydantic/tests/__init__.py,sha256=gKp8psECUlJGBrauw7xR1zTG8ELANzd8zArINIP4l_0,59
-odoo/addons/base_rest_pydantic/tests/test_from_params.py,sha256=bgn2aQowCyRvgAPkSjXWFrUa8maQ6-1dYBH3JYgeNXU,2246
-odoo/addons/base_rest_pydantic/tests/test_response.py,sha256=B1RFpK7hGJvqSAH82J1_wRr0DdpMje61Z_S8jjCqGSg,1385
-odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/METADATA,sha256=0ulv1Xq9Ks0r48e6bsQ12rgnVP4a7UFLo_1g70_OYR0,4331
-odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_base_rest_pydantic-16.0.1.0.0.2.dist-info/RECORD,,
+odoo/addons/base_rest_pydantic/tests/test_from_params.py,sha256=hfB-X4DzDtKTgMJgBnxdOjgU0KmFlzFXrYbQlbSJfgo,2370
+odoo/addons/base_rest_pydantic/tests/test_response.py,sha256=wKFAAV2gs_Ry5n65rFmbHGpLIwlIVBSKgpzeu43XHAU,1674
+odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/METADATA,sha256=j-_wM-16_OaB8lMw3yWvLoezxo9K8p1NtTsRHBYUxho,4339
+odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_base_rest_pydantic-16.0.2.0.0.dist-info/RECORD,,
```

