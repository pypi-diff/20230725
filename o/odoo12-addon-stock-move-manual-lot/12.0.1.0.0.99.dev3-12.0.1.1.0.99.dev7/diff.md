# Comparing `tmp/odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3-py3-none-any.whl.zip` & `tmp/odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,28 @@
-Zip file size: 27013 bytes, number of entries: 24
--rw-r--r--  2.0 unx     3075 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/README.rst
--rw-r--r--  2.0 unx      158 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/__init__.py
--rw-r--r--  2.0 unx      709 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/__manifest__.py
--rw-r--r--  2.0 unx      215 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/hooks.py
--rw-r--r--  2.0 unx     1364 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot
--rw-r--r--  2.0 unx      194 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/models/__init__.py
--rw-r--r--  2.0 unx     2795 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/models/stock_move_line.py
--rw-r--r--  2.0 unx      703 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/models/stock_picking.py
--rw-r--r--  2.0 unx      273 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/models/stock_picking_type.py
--rw-r--r--  2.0 unx       76 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       95 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      179 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/readme/USAGE.rst
--rw-r--r--  2.0 unx        0 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/readme/newsfragments/.gitkeep
--rw-r--r--  2.0 unx     9455 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/static/description/icon.png
--rw-r--r--  2.0 unx    12440 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/static/description/index.html
--rw-r--r--  2.0 unx      144 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/tests/__init__.py
--rw-r--r--  2.0 unx     4311 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/tests/test_stock_move_manual_lot.py
--rw-r--r--  2.0 unx     1138 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/views/stock_move_line.xml
--rw-r--r--  2.0 unx     1985 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/views/stock_picking.xml
--rw-r--r--  2.0 unx      412 b- defN 21-Jul-28 14:16 odoo/addons/stock_move_manual_lot/views/stock_picking_type.xml
--rw-r--r--  2.0 unx     3686 b- defN 21-Jul-28 14:16 odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Jul-28 14:16 odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 21-Jul-28 14:16 odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2704 b- defN 21-Jul-28 14:16 odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/RECORD
-24 files, 46208 bytes uncompressed, 22347 bytes compressed:  51.6%
+Zip file size: 33002 bytes, number of entries: 26
+-rw-r--r--  2.0 unx     3133 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/README.rst
+-rw-r--r--  2.0 unx      158 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/__init__.py
+-rw-r--r--  2.0 unx      758 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/__manifest__.py
+-rw-r--r--  2.0 unx      215 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/hooks.py
+-rw-r--r--  2.0 unx     1836 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot
+-rw-r--r--  2.0 unx      577 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/migrations/12.0.1.1.0/post-migration.py
+-rw-r--r--  2.0 unx      219 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/models/__init__.py
+-rw-r--r--  2.0 unx      507 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/models/stock_move.py
+-rw-r--r--  2.0 unx     7197 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/models/stock_move_line.py
+-rw-r--r--  2.0 unx     4553 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/models/stock_picking.py
+-rw-r--r--  2.0 unx      273 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/models/stock_picking_type.py
+-rw-r--r--  2.0 unx      120 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       95 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      179 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/readme/USAGE.rst
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/readme/newsfragments/.gitkeep
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/static/description/icon.png
+-rw-r--r--  2.0 unx    12598 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/static/description/index.html
+-rw-r--r--  2.0 unx      144 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/tests/__init__.py
+-rw-r--r--  2.0 unx    17601 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/tests/test_stock_move_manual_lot.py
+-rw-r--r--  2.0 unx     1138 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/views/stock_move_line.xml
+-rw-r--r--  2.0 unx     1985 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/views/stock_picking.xml
+-rw-r--r--  2.0 unx      412 b- defN 23-Jul-25 06:24 odoo/addons/stock_move_manual_lot/views/stock_picking_type.xml
+-rw-r--r--  2.0 unx     3793 b- defN 23-Jul-25 06:24 odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-25 06:24 odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-25 06:24 odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2946 b- defN 23-Jul-25 06:24 odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/RECORD
+26 files, 69989 bytes uncompressed, 27930 bytes compressed:  60.1%
```

## zipnote {}

```diff
@@ -9,17 +9,23 @@
 
 Filename: odoo/addons/stock_move_manual_lot/hooks.py
 Comment: 
 
 Filename: odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot
 Comment: 
 
+Filename: odoo/addons/stock_move_manual_lot/migrations/12.0.1.1.0/post-migration.py
+Comment: 
+
 Filename: odoo/addons/stock_move_manual_lot/models/__init__.py
 Comment: 
 
+Filename: odoo/addons/stock_move_manual_lot/models/stock_move.py
+Comment: 
+
 Filename: odoo/addons/stock_move_manual_lot/models/stock_move_line.py
 Comment: 
 
 Filename: odoo/addons/stock_move_manual_lot/models/stock_picking.py
 Comment: 
 
 Filename: odoo/addons/stock_move_manual_lot/models/stock_picking_type.py
@@ -54,20 +60,20 @@
 
 Filename: odoo/addons/stock_move_manual_lot/views/stock_picking.xml
 Comment: 
 
 Filename: odoo/addons/stock_move_manual_lot/views/stock_picking_type.xml
 Comment: 
 
-Filename: odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/METADATA
+Filename: odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/METADATA
 Comment: 
 
-Filename: odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/WHEEL
+Filename: odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/WHEEL
 Comment: 
 
-Filename: odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/top_level.txt
+Filename: odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/RECORD
+Filename: odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_move_manual_lot/README.rst

```diff
@@ -53,19 +53,21 @@
 Credits
 =======
 
 Authors
 ~~~~~~~
 
 * Hunki Enterprises BV
+* Opener B.V.
 
 Contributors
 ~~~~~~~~~~~~
 
 * Holger Brunn <mail@hunki-enterprises.com> (https://hunki-enterprises.com)
+* Stefan Rijnhart <stefan@opener.amsterdam>
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## odoo/addons/stock_move_manual_lot/__manifest__.py

```diff
@@ -1,16 +1,20 @@
 # Copyright 2021 Hunki Enterprises BV
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Enforce manually selected lot",
     "summary": "Force the user to manually select a lot",
-    "version": "12.0.1.0.0",
+    "version": "12.0.1.1.0",
     "category": "Stock",
     "website": "https://github.com/OCA/stock-logistics-workflow",
-    "author": "Hunki Enterprises BV, Odoo Community Association (OCA)",
+    "author": (
+        "Hunki Enterprises BV,"
+        "Opener B.V.,"
+        "Odoo Community Association (OCA)"
+    ),
     "license": "AGPL-3",
     "installable": True,
     "depends": [
         "stock",
         "base_view_inheritance_extension",
     ],
     "data": [
```

## odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot

```diff
@@ -10,29 +10,46 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: stock_move_manual_lot
+#: code:addons/stock_move_manual_lot/models/stock_move_line.py:158
+#, python-format
+msgid "Error assigning lot %s: %s"
+msgstr ""
+
+#. module: stock_move_manual_lot
 #: model:ir.model.fields,field_description:stock_move_manual_lot.field_stock_move_line__manual_lot_id
 msgid "Lot/Serial"
 msgstr ""
 
 #. module: stock_move_manual_lot
 #: model:ir.model,name:stock_move_manual_lot.model_stock_picking_type
 msgid "Picking Type"
 msgstr ""
 
 #. module: stock_move_manual_lot
+#: code:addons/stock_move_manual_lot/models/stock_picking.py:38
+#, python-format
+msgid "Please supply a Lot/Serial number for products %s."
+msgstr ""
+
+#. module: stock_move_manual_lot
 #: model:ir.model,name:stock_move_manual_lot.model_stock_move_line
 msgid "Product Moves (Stock Move Line)"
 msgstr ""
 
 #. module: stock_move_manual_lot
+#: model:ir.model,name:stock_move_manual_lot.model_stock_move
+msgid "Stock Move"
+msgstr ""
+
+#. module: stock_move_manual_lot
 #: model:ir.model,name:stock_move_manual_lot.model_stock_picking
 msgid "Transfer"
 msgstr ""
 
 #. module: stock_move_manual_lot
 #: model:ir.model.fields,field_description:stock_move_manual_lot.field_stock_move_line__use_manual_lot_selection
 #: model:ir.model.fields,field_description:stock_move_manual_lot.field_stock_picking__use_manual_lot_selection
```

## odoo/addons/stock_move_manual_lot/models/__init__.py

```diff
@@ -1,5 +1,6 @@
 # Copyright 2021 Hunki Enterprises BV
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
+from . import stock_move
 from . import stock_move_line
 from . import stock_picking
 from . import stock_picking_type
```

## odoo/addons/stock_move_manual_lot/models/stock_move_line.py

```diff
@@ -1,74 +1,167 @@
 # Copyright 2021 Hunki Enterprises BV
+# Copyright 2021 Opener B.V. <stefan@opener.amsterdam>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
-import operator
-from odoo import api, fields, models
+from odoo import _, api, fields, models
 from odoo.exceptions import UserError
+from odoo.tools.float_utils import float_compare
 
 
 class StockMoveLine(models.Model):
     _inherit = "stock.move.line"
 
     use_manual_lot_selection = fields.Boolean(
         related="picking_id.picking_type_id.use_manual_lot_selection",
     )
-    manual_lot_id = fields.Many2one("stock.production.lot", "Lot/Serial")
+    manual_lot_id = fields.Many2one(
+        comodel_name="stock.production.lot",
+        string="Lot/Serial",
+        copy=False,
+    )
+
+    def _store_product_qty(self):
+        """Ensure consistent values for product_qty in the database
+
+        This module triggers (re)assignment of affected pickings within a
+        x2many write on a picking's move lines. The quantity to assign depends
+        on stock.move's reserved_quantity, which depends on the recompute of
+        stock.move.line's `product_qty` whenever `product_uom_quantity is
+        written. Because the x2many commands are processed under the scope of
+        env.norecompute(), we have to take care of this ourselves.
+        """
+        field = self._fields["product_qty"]
+        mls = self.env.field_todo(field).exists()
+        for ml in mls:
+            ml._write({"product_qty": ml.product_qty})
+        self.env.remove_todo(field, mls)
+
+    @api.multi
+    def unlink(self):
+        """Keep move lines if they are assigned a manual lot in a batch"""
+        if self.env.context.get("manual_lot_move_lines"):
+            to_keep = self.filtered(
+                lambda ml: ml.id in self.env.context["manual_lot_move_lines"])
+            to_keep.write({
+                "lot_id": False,
+                "manual_lot_id": False,
+                "product_uom_qty": 0,
+            })
+            self -= to_keep
+        if not self:
+            return True
+        return super().unlink()
 
     @api.model_create_multi
     def create(self, vals_list):
-        result = super().create(vals_list)
+        """Reuse zero quantity move line from the same move."""
+        to_super = vals_list
+        result = self.env["stock.move.line"]
+        if self.env.context.get("manual_lot_move_lines"):
+            to_super = []
+            for vals in vals_list:
+                if not vals.get("manual_lot_id") and vals.get("move_id"):
+                    existing = self.search(
+                        [("product_uom_qty", "=", 0),
+                         ("move_id", "=", vals["move_id"])],
+                        limit=1)
+                    if existing:
+                        result += existing
+                        existing.with_context(
+                            bypass_reservation_update=True).write(vals)
+                    else:
+                        to_super.append(vals)
+        result += super().create(to_super)
+        if not self.env.recompute:
+            self._store_product_qty()
         for vals, this in zip(vals_list, result):
             this._reserve_manual_lot(vals)
         return result
 
     def write(self, vals):
         result = super().write(vals)
+        if "product_uom_qty" in vals and not self.env.recompute:
+            self._store_product_qty()
         self._reserve_manual_lot(vals)
         return result
 
     def _reserve_manual_lot(self, vals):
-        if "manual_lot_id" not in vals:
+        if "manual_lot_id" not in vals and "lot_id" not in vals:
             return
         for this in self:
-            if this.lot_id == this.manual_lot_id:
+            if this.product_id.tracking == 'none':
+                if "manual_lot_id" not in vals:
+                    if this.manual_lot_id != this.lot_id:
+                        this.manual_lot_id = this.lot_id
+                    continue
+            elif not vals.get("manual_lot_id"):
+                if (not this.picking_id.picking_type_id.use_manual_lot_selection
+                        and this.manual_lot_id != this.lot_id):
+                    this.manual_lot_id = this.lot_id
                 continue
-            if not this.picking_id.picking_type_id.use_manual_lot_selection:
+            if this.lot_id == this.manual_lot_id:
                 continue
+            product_qty = this.product_qty
+            product_uom_qty = this.product_uom_qty
+            if this.id in self.env.context.get("manual_lot_move_lines", {}):
+                product_qty = self.env.context["manual_lot_move_lines"][this.id]
+                if float_compare(
+                        product_qty, this.product_qty,
+                        this.product_uom_id.rounding):
+                    product_uom_qty = this.product_id.uom_id._compute_quantity(
+                        product_qty, this.product_uom_id,
+                        rounding_method="HALF-UP")
 
             available_qty = self.env['stock.quant']._get_available_quantity(
                 this.product_id,
                 this.location_id,
                 lot_id=this.manual_lot_id,
                 package_id=this.package_id,
                 owner_id=this.owner_id,
             )
             updated_picking_ids = []
-            if available_qty < this.product_qty:
+            if available_qty < product_qty:
                 # free_reservation might unassign pickings, so we record which
                 # ones have been changed
                 self.env.cr.execute("select now() at time zone 'UTC'")
                 now, = self.env.cr.fetchone()
                 this._free_reservation(
                     this.product_id,
                     this.location_id,
-                    this.product_qty - available_qty,
+                    product_qty - available_qty,
                     lot_id=this.manual_lot_id,
                     package_id=this.package_id,
                     owner_id=this.owner_id,
                     ml_to_ignore=self,
                 )
                 self.env.cr.execute(
-                    'select id from stock_picking where write_date = %s', (now,),
+                    'select distinct picking_id from stock_move where write_date = %s',
+                    (now,),
                 )
-                updated_picking_ids = list(map(
-                    operator.itemgetter(0), self.env.cr.fetchall(),
-                ))
+                updated_picking_ids = [row for row, in self.env.cr.fetchall() if row]
 
             this.lot_id = this.manual_lot_id
-
+            if this.product_qty < product_qty:
+                try:
+                    self.env["stock.quant"]._update_reserved_quantity(
+                        this.product_id,
+                        this.location_id,
+                        product_qty - this.product_qty,
+                        lot_id=this.manual_lot_id,
+                        package_id=this.package_id,
+                        owner_id=this.owner_id,
+                        # For untracked products, reservation of stock
+                        # without serial is enforced.
+                        strict=(not this.manual_lot_id
+                                and this.product_id.tracking == 'none'),
+                    )
+                except UserError as ex:
+                    raise UserError(
+                        _("Error assigning lot %s: %s") % (
+                            this.manual_lot_id.name, ex.args[0]))
+                this.product_uom_qty = product_uom_qty
             if updated_picking_ids:
                 # see if we can assign pickings that were unassigned above
                 try:
                     with self.env.cr.savepoint():
                         self.env['stock.picking'].browse(
                             updated_picking_ids
                         ).action_assign()
```

## odoo/addons/stock_move_manual_lot/models/stock_picking.py

```diff
@@ -1,22 +1,101 @@
 # Copyright 2021 Hunki Enterprises BV
+# Copyright 2021 Opener B.V. <stefan@opener.amsterdam>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
-from odoo import fields, models
+from odoo import _, fields, models
+from odoo.exceptions import UserError
+from odoo.tools.float_utils import float_compare, float_is_zero
 
 
 class StockPicking(models.Model):
     _inherit = "stock.picking"
 
     use_manual_lot_selection = fields.Boolean(
         related="picking_type_id.use_manual_lot_selection",
     )
 
     def button_validate(self):
-        """Call the logic to reserve lots selected in field
-        manual_lot_id. The result is an error if no manual lot
-        is selected for products with tracking!=none"""
-        self.mapped("move_line_ids")._reserve_manual_lot(
-            {
-                "manual_lot_id": True,
-            }
-        )
+        """Check for missing manually assigned lots"""
+        if self.picking_type_id.use_manual_lot_selection:
+            precision_digits = self.env['decimal.precision'].precision_get(
+                'Product Unit of Measure')
+            no_quantities_done = all(
+                float_is_zero(move_line.qty_done,
+                              precision_digits=precision_digits)
+                for move_line in self.move_line_ids.filtered(
+                    lambda m: m.state not in ('done', 'cancel')))
+            lines_to_check = self.move_line_ids
+            if not no_quantities_done:
+                lines_to_check = lines_to_check.filtered(
+                    lambda line: float_compare(
+                        line.qty_done, 0,
+                        precision_rounding=line.product_uom_id.rounding)
+                )
+            missing = lines_to_check.filtered(
+                lambda line: line.product_id.tracking != 'none'
+                and not line.manual_lot_id).mapped("product_id")
+            if missing:
+                raise UserError(
+                    _('Please supply a Lot/Serial number for products %s.') %
+                    ", ".join(product.name or product.default_code
+                              for product in missing))
         return super().button_validate()
+
+    def action_done(self):
+        """Keep manual lots up to date not to lose visibility.
+
+        Keep visibility of transferred lot in the case of
+        * an untracked product transferred without setting a manual lot
+        * an update of a picking type to use manual lot selection
+        """
+        res = super().action_done()
+        for ml in self.mapped("move_line_ids").filtered(
+                lambda ml: ml.lot_id != ml.manual_lot_id):
+            ml.manual_lot_id = ml.lot_id
+        return res
+
+    def write(self, vals):
+        """Encode move line quantities in the context if necessary.
+
+        If manual_lot_id is being written on the move lines, this could lead
+        to freeing move lines from the same picking that are also being
+        written in this very same call. We encode the original reserved
+        quantities of the move lines in the context so that they can be
+        rereserved for these quantities.
+        """
+        StockMoveLine = self.env['stock.move.line']
+        defer_delete_lines = StockMoveLine.browse([])
+        explicit_delete_lines = StockMoveLine.browse([])
+        writes_manual_lot_id = False
+        for command in (vals.get("move_line_ids", []) or []) + (
+                vals.get("move_line_ids_without_package", []) or []
+        ):
+            if writes_manual_lot_id and command[0] in (1, 2, 3, 4):
+                defer_delete_lines += StockMoveLine.browse(command[1])
+                if command[0] == 2:
+                    explicit_delete_lines += StockMoveLine.browse(command[1])
+            if command[0] in (0, 1) and 'manual_lot_id' in command[2]:
+                writes_manual_lot_id = True
+        if defer_delete_lines:
+            original_context = self.env.context
+            self = self.with_context(
+                manual_lot_move_lines=dict(
+                    (ml.id, ml.product_qty) for ml in defer_delete_lines)
+                )
+        result = super().write(vals)
+        explicit_delete_lines.unlink()
+        if defer_delete_lines:
+            self = self.with_context(original_context)
+            # Clean up any remaining zero qty move lines
+            move_lines = self.env["stock.move.line"].search(
+                [("id", "in", defer_delete_lines.ids), ("product_qty", "=", 0)])
+            if move_lines:
+                moves = move_lines.mapped("move_id")
+                move_lines.unlink()
+                moves._recompute_state()
+                for picking in moves.mapped("picking_id").with_context():
+                    try:
+                        with self.env.cr.savepoint():
+                            picking.action_assign()
+                    except UserError:
+                        pass
+        return result
```

## odoo/addons/stock_move_manual_lot/readme/CONTRIBUTORS.rst

```diff
@@ -1 +1,2 @@
 * Holger Brunn <mail@hunki-enterprises.com> (https://hunki-enterprises.com)
+* Stefan Rijnhart <stefan@opener.amsterdam>
```

## odoo/addons/stock_move_manual_lot/static/description/index.html

### odoo/addons/stock_move_manual_lot/static/description/index.html

```diff
@@ -442,28 +442,34 @@
         </h1>
         <div class="section" id="authors">
           <h2>
             <a class="toc-backref" href="#id4">Authors</a>
           </h2>
           <ul class="simple">
             <li>Hunki Enterprises BV</li>
+            <li>Opener B.V.</li>
           </ul>
         </div>
         <div class="section" id="contributors">
           <h2>
             <a class="toc-backref" href="#id5">Contributors</a>
           </h2>
           <ul class="simple">
             <li>
               Holger Brunn &lt;
               <a class="reference external" href="mailto:mail@hunki-enterprises.com">mail@hunki-enterprises.com</a>
               &gt; (
               <a class="reference external" href="https://hunki-enterprises.com">https://hunki-enterprises.com</a>
               )
             </li>
+            <li>
+              Stefan Rijnhart &lt;
+              <a class="reference external" href="mailto:stefan@opener.amsterdam">stefan@opener.amsterdam</a>
+              &gt;
+            </li>
           </ul>
         </div>
         <div class="section" id="maintainers">
           <h2>
             <a class="toc-backref" href="#id6">Maintainers</a>
           </h2>
           <p>This module is maintained by the OCA.</p>
```

## odoo/addons/stock_move_manual_lot/tests/test_stock_move_manual_lot.py

```diff
@@ -1,117 +1,435 @@
-# Copyright 2021 Hunki Enterprises BV
+# Copyright 2021 Opener B.V. <stefan@opener.amsterdam>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
+from datetime import timedelta
+from uuid import uuid1
 from odoo.exceptions import UserError
 from odoo.tests.common import TransactionCase
 
 
 class TestStockMoveManualLot(TransactionCase):
-    def setUp(self):
-        super().setUp()
-        self.product = self.env["product.product"].create(
-            {
-                "name": "Tracked product",
-                "tracking": "serial",
-                "type": "product",
-            }
-        )
-        self.lot1 = self.env["stock.production.lot"].create(
+    def _create_lot(self):
+        return self.env["stock.production.lot"].create(
             {
-                "name": "lot1",
+                "name": str(uuid1()),
                 "product_id": self.product.id,
             }
         )
-        self.lot2 = self.env["stock.production.lot"].create(
-            {
-                "name": "lot2",
-                "product_id": self.product.id,
-            }
-        )
-        self.picking = self.env["stock.picking"].create(
+
+    def _create_quant(self, lot=None, qty=1):
+        """Create any number of quants.
+
+        :param lot: create quants with these lot(s).
+        When None, create lots on the fly.
+        When empty recordset, create quants without lot.
+        :param qty: number of quants to create. If more than one lot is
+        passed, the number of lots overrides this.
+        """
+        if lot and len(lot) > qty:
+            qty = len(lot)
+        quants = self.env["stock.quant"]
+        for i in range(0, qty):
+            if lot and len(lot) > 0:
+                use_lot = lot[i]
+            elif lot is None:
+                use_lot = self._create_lot()
+            else:
+                use_lot = lot
+            quants += self.env["stock.quant"].create(
+                {
+                    "product_id": self.product.id,
+                    "quantity": 1,
+                    "location_id": self.location.id,
+                    "lot_id": use_lot.id,
+                }
+            )
+        return quants
+
+    def _create_picking(self, qty=1, confirm=True, assign=True):
+        picking = self.env["stock.picking"].create(
             {
-                "picking_type_id": self.env.ref("stock.picking_type_out").id,
-                "location_id": self.env.ref("stock.stock_location_stock").id,
-                "location_dest_id": self.env.ref("stock.stock_location_customers").id,
+                "picking_type_id": self.picking_type.id,
+                "location_id": self.location.id,
+                "location_dest_id": self.dest_location.id,
                 "move_lines": [
                     (
                         0,
                         0,
                         {
                             "name": "testmove",
                             "product_id": self.product.id,
                             "product_uom": self.product.uom_id.id,
-                            "product_uom_qty": 1,
+                            "product_uom_qty": qty,
                         },
                     )
                 ],
             }
         )
-        self.picking.picking_type_id.use_manual_lot_selection = True
-        self.quant = self.env["stock.quant"].create(
-            {
-                "product_id": self.product.id,
-                "quantity": 1,
-                "location_id": self.picking.location_id.id,
-                "lot_id": self.lot1.id,
-            }
-        )
-        self.picking.action_assign()
-        self.quant = self.env["stock.quant"].create(
+        if confirm:
+            picking.action_confirm()
+            if assign:
+                picking.action_assign()
+        return picking
+
+    def _backdate_moves(self):
+        """Moves are selected for reassignment based on their write dates"""
+        for move in self.env["stock.move"].search([]):
+            move.write_date -= timedelta(minutes=1)
+
+    def setUp(self):
+        super().setUp()
+        self.product = self.env["product.product"].create(
             {
-                "product_id": self.product.id,
-                "quantity": 1,
-                "location_id": self.picking.location_id.id,
-                "lot_id": self.lot2.id,
+                "name": "Tracked product",
+                "tracking": "serial",
+                "type": "product",
             }
         )
+        self.picking_type = self.env.ref("stock.picking_type_out")
+        self.picking_type.use_manual_lot_selection = True
+        self.location = self.env.ref("stock.stock_location_stock")
+        self.dest_location = self.env.ref("stock.stock_location_customers")
 
-    def test_force_manual_selection(self):
-        self.picking.move_line_ids.qty_done = self.picking.move_line_ids.product_qty
-        with self.assertRaises(
-            UserError
+    def test_01_force_manual_selection(self):
+        """Picking can not be validated without manual lot selection"""
+        lot = self._create_quant().lot_id
+        picking = self._create_picking()
+        picking.move_line_ids.qty_done = picking.move_line_ids.product_qty
+        with self.assertRaisesRegex(
+                UserError, "Serial"
         ), self.env.clear_upon_failure(), self.env.cr.savepoint():
-            self.picking.button_validate()
-        self.picking.move_line_ids.manual_lot_id = self.lot1
-        self.picking.button_validate()
-        self.assertEqual(self.picking.state, "done")
+            picking.button_validate()
+        picking.move_line_ids.manual_lot_id = lot
+        picking.button_validate()
+        self.assertEqual(picking.state, "done")
         self.assertEqual(
             self.env["stock.quant"]
             .search(
                 [
-                    ("location_id", "=", self.picking.location_dest_id.id),
+                    ("location_id", "=", self.dest_location.id),
                     ("product_id", "=", self.product.id),
                 ]
             )
             .mapped("lot_id"),
-            self.lot1,
+            lot,
         )
 
-    def test_reassign_reservation(self):
-        picking2 = self.picking.copy()
-        picking2.action_assign()
-        self.assertEqual(picking2.move_line_ids.lot_id, self.lot2)
-        self.assertTrue(self.picking.move_line_ids)
-        picking2.move_line_ids.manual_lot_id = self.lot1
-        self.assertTrue(self.picking.move_line_ids)
-        self.assertEqual(self.picking.move_line_ids.lot_id, self.lot2)
+    def test_02_reassign_reservation(self):
+        """Pickings are rereserved after their lots were fetched on another"""
+        quant1 = self._create_quant()
+        picking = self._create_picking()
+        self.assertEqual(quant1.reserved_quantity, 1)
+        quant2 = self._create_quant()
+        picking2 = self._create_picking()
+        self.assertEqual(quant2.reserved_quantity, 1)
+        self.assertEqual(picking2.move_line_ids.lot_id, quant2.lot_id)
+        self.assertTrue(picking.move_line_ids)
+        self._backdate_moves()
+        picking2.write({
+            "move_line_ids": [
+                (1, picking2.move_line_ids.id, {
+                    "manual_lot_id": quant1.lot_id.id,
+                })]})
+        self.assertTrue(picking.move_line_ids)
+        self.assertEqual(picking.move_line_ids.lot_id, quant2.lot_id)
         with self.assertRaises(
             UserError
         ), self.env.clear_upon_failure(), self.env.cr.savepoint():
-            self.picking.button_validate()
+            picking.button_validate()
         self.assertEqual(
-            self.picking.move_lines.product_qty, self.picking.move_line_ids.product_qty
+            picking.move_lines.product_qty, picking.move_line_ids.product_qty
         )
-        self.picking.move_line_ids.update(
+        picking.move_line_ids.update(
             dict(
-                qty_done=self.picking.move_line_ids.product_qty,
-                manual_lot_id=self.lot2,
+                qty_done=picking.move_line_ids.product_qty,
+                manual_lot_id=quant2.lot_id,
             )
         )
         quant_domain = [
-            ("location_id", "=", self.picking.location_dest_id.id),
+            ("location_id", "=", self.dest_location.id),
             ("product_id", "=", self.product.id),
         ]
         self.assertFalse(self.env["stock.quant"].search(quant_domain))
-        self.picking.button_validate()
+        picking.button_validate()
         self.assertEqual(
-            self.env["stock.quant"].search(quant_domain).mapped("lot_id"), self.lot2
+            self.env["stock.quant"].search(quant_domain).lot_id, quant2.lot_id
         )
+
+    def test_03_multiple_lines_flip(self):
+        """Multiple lines (with each other's lots) can be reassigned at once.
+        """
+        quant1, quant2 = self._create_quant(qty=2)
+        picking = self._create_picking(2)
+        self.assertEqual(quant1.reserved_quantity, 1)
+        move_line1, move_line2 = picking.move_line_ids
+        lot1 = move_line1.lot_id
+        lot2 = move_line2.lot_id
+        picking.write({
+            "move_line_ids": [
+                (1, picking.move_line_ids[1].id, {"manual_lot_id": lot1.id}),
+            ],
+        })
+        picking.write({
+            "move_line_ids": [
+                (1, picking.move_line_ids[0].id, {"manual_lot_id": lot1.id}),
+                (1, picking.move_line_ids[1].id, {"manual_lot_id": False}),
+            ],
+        })
+        picking.write({
+            "move_line_ids": [
+                (1, picking.move_line_ids[0].id, {"manual_lot_id": False}),
+                (1, picking.move_line_ids[1].id, {"manual_lot_id": lot1.id}),
+            ],
+        })
+        picking.write({
+            "move_line_ids": [
+                (1, picking.move_line_ids[0].id, {"manual_lot_id": lot2.id}),
+                (1, picking.move_line_ids[1].id, {"manual_lot_id": lot1.id}),
+            ],
+        })
+        self.assertEqual(quant1.reserved_quantity, 1)
+        self.assertEqual(quant2.reserved_quantity, 1)
+        self.assertTrue(picking.move_line_ids[0].lot_id)
+        self.assertTrue(picking.move_line_ids[1].lot_id)
+        self.assertEqual(
+            picking.move_line_ids.mapped("lot_id"), lot1 + lot2)
+        self.assertEqual(picking.move_line_ids[0].product_uom_qty, 1)
+        self.assertEqual(picking.move_line_ids[1].product_uom_qty, 1)
+        picking.move_line_ids[0].qty_done = picking.move_line_ids[0].product_qty
+        picking.move_line_ids[1].qty_done = picking.move_line_ids[1].product_qty
+        picking.button_validate()
+        self.assertEqual(picking.state, "done")
+
+    def test_04_multiple_lines_move_lot(self):
+        """
+        Test that moving a manual lot from one line to the other works
+        """
+        self._create_quant(qty=2)
+        picking = self._create_picking(2)
+        line_with_lot, line_without_lot = picking.move_line_ids
+        lot1 = line_with_lot.lot_id
+        line_with_lot.manual_lot_id = lot1
+        picking.write({
+            'move_line_ids': [
+                (1, line_without_lot.id, {
+                    'manual_lot_id': lot1.id,
+                }),
+                (1, line_with_lot.id, {
+                    'manual_lot_id': False,
+                }),
+            ],
+        })
+        self.assertEqual(line_without_lot.lot_id, lot1)
+        other_line = picking.move_line_ids - line_without_lot
+        self.assertTrue(other_line.lot_id)
+        self.assertFalse(other_line.manual_lot_id)
+        self.assertEqual(other_line.product_qty, 1)
+
+    def test_05_multiple_lines_assign(self):
+        """
+        Test that just reassigning a manual lot from one line to the other works
+        """
+        self._create_quant(qty=2)
+        picking = self._create_picking(2)
+        line_with_lot, line_without_lot = picking.move_line_ids
+        lot1 = line_with_lot.lot_id
+        line_with_lot.manual_lot_id = lot1
+        picking.write({
+            'move_line_ids': [
+                (1, line_without_lot.id, {
+                    'manual_lot_id': line_with_lot.manual_lot_id.id,
+                }),
+                # this is what the webclient sends when we don't change
+                # the line
+                (4, line_with_lot.id, False),
+            ],
+        })
+        self.assertEqual(line_without_lot.lot_id, lot1)
+        other_line = picking.move_line_ids - line_without_lot
+        self.assertTrue(other_line.lot_id)
+        self.assertFalse(other_line.manual_lot_id)
+        self.assertEqual(other_line.product_qty, 1)
+
+    def test_06_multiple_lines_delete(self):
+        """
+        Test that reassigning a manual lot from one line to the other works
+        when deleting the first one
+        """
+        self._create_quant(qty=2)
+        picking = self._create_picking(2)
+        line_with_lot, line_without_lot = picking.move_line_ids
+        lot1 = line_with_lot.lot_id
+        line_with_lot.manual_lot_id = lot1
+        picking.write({
+            'move_line_ids': [
+                (1, line_without_lot.id, {
+                    'manual_lot_id': line_with_lot.manual_lot_id.id,
+                }),
+                (2, line_with_lot.id, False),
+            ],
+        })
+        self.assertEqual(line_without_lot.lot_id, lot1)
+        self.assertFalse(line_with_lot.exists())
+
+    def test_07_serial_not_in_stock(self):
+        """It is not allowed to assign a serial that is not in stock"""
+        self._create_quant()
+        picking = self._create_picking()
+        with self.assertRaisesRegex(UserError, "than you have in stock"):
+            picking.move_line_ids.manual_lot_id = self._create_lot()
+
+    def test_08_backorder(self):
+        """An assigned move line on a picking can be left untransferred."""
+        picking = self._create_picking(confirm=False)
+        line = picking.move_lines
+        # Create up to 4 lines
+        line.copy()
+        line.copy()
+        line.copy()
+        self._create_quant(qty=3)
+        picking.action_assign()
+        # Of the 4 lines, 3 are assigned.
+        ml1, ml2, ml3 = picking.move_line_ids
+        # We're transferring only the first move line
+        ml1.qty_done = ml1.product_qty
+        ml1.manual_lot_id = ml1.lot_id
+        # 2nd move line is assigned a manual lot, but the 3rd one is not
+        ml2.manual_lot_id = ml2.lot_id
+        res = picking.button_validate()
+        self.env[res["res_model"]].browse(res["res_id"]).process()
+        backorder = self.env["stock.picking"].search(
+            [("backorder_id", "=", picking.id)])
+        self.assertEqual(backorder.move_lines.product_uom_qty, 3)
+        self.assertEqual(backorder.move_lines.reserved_availability, 2)
+
+    def test_09_non_tracked_product(self):
+        """Non tracked product, but having lots in stock
+
+        Manual lot is synced with lot_id automatically. If the manual lot
+        is unset, reservation of stock without serial is enforced.
+        """
+        lot1, lot2 = self._create_quant(qty=2).mapped("lot_id")
+        picking = self._create_picking()
+        self.product.tracking = 'none'
+        picking.do_unreserve()
+        picking.action_assign()
+        self.assertTrue(picking.move_line_ids.manual_lot_id)
+        self.assertEqual(
+            picking.move_line_ids.manual_lot_id,
+            picking.move_line_ids.lot_id)
+        # Lot is synced with manual lot
+        picking.move_line_ids.manual_lot_id = lot2
+        self.assertEqual(picking.move_line_ids.lot_id, lot2)
+        # Manual lot is synced with lot
+        picking.move_line_ids.lot_id = lot1
+        self.assertEqual(picking.move_line_ids.manual_lot_id, lot1)
+        # Unsetting the serial raises if there is stock without serial.
+        with self.assertRaisesRegex(
+                UserError, "than you have in stock"
+        ), self.env.clear_upon_failure(), self.env.cr.savepoint():
+            picking.move_line_ids.manual_lot_id = False
+
+        # Create stock without serial. Serial can now be unset
+        self._create_quant(self.env["stock.production.lot"])
+        picking.move_line_ids.manual_lot_id = False
+        self.assertFalse(picking.move_line_ids.lot_id)
+        self.assertTrue(picking.move_line_ids.product_qty)
+
+        picking.move_line_ids.qty_done = (
+            picking.move_line_ids.product_qty
+        )
+        picking.button_validate()
+        self.assertEqual(picking.state, "done")
+
+    def test_10_unset_manual_lot(self):
+        """Unsetting a manual lot does not unreserve the move line."""
+        lot1 = self._create_quant(qty=2).mapped("lot_id")[0]
+        picking = self._create_picking()
+        ml = picking.move_line_ids
+        ml.qty_done = ml.product_qty
+        picking.move_line_ids.manual_lot_id = lot1
+        picking.move_line_ids.manual_lot_id = False
+        self.assertEqual(ml.product_qty, 1)
+        with self.assertRaisesRegex(
+                UserError, "Serial"
+        ), self.env.clear_upon_failure(), self.env.cr.savepoint():
+            picking.button_validate()
+        picking.move_line_ids.manual_lot_id = lot1
+        picking.button_validate()
+        self.assertEqual(picking.state, "done")
+
+    def test_11_no_manual_selection(self):
+        """Manual lot is kept in sync with lot.
+
+        Also, picking can be validated if manual lot is not set.
+        """
+        lot2 = self._create_quant(qty=2).mapped("lot_id")[1]
+        picking = self._create_picking()
+        self.picking_type.use_manual_lot_selection = False
+        ml = picking.move_line_ids
+        ml.qty_done = ml.product_qty
+        picking.move_line_ids.lot_id = lot2
+        self.assertEqual(picking.move_line_ids.manual_lot_id, lot2)
+        picking.move_line_ids.manual_lot_id = False
+        self.assertEqual(picking.move_line_ids.lot_id, lot2)
+        self.assertFalse(picking.move_line_ids.manual_lot_id)
+        self.assertEqual(picking.move_line_ids.lot_id, lot2)
+        picking.move_line_ids.qty_done = (
+            picking.move_line_ids.product_qty)
+        picking.button_validate()
+        self.assertEqual(picking.state, "done")
+        self.assertEqual(picking.move_line_ids.manual_lot_id, lot2)
+
+    def test_12_no_overassignment(self):
+        """Overassignment does not occur after assigning manual lots.
+
+        This problem can occur when pickings are reassigned before the values
+        for stock.move.line's product_qty are stored in the database.
+        """
+        self._create_quant(qty=2)
+        picking = self._create_picking(3)
+        self._create_quant(qty=5)
+        picking2 = self._create_picking(3)
+        self.assertEqual(picking.move_lines.state, "partially_available")
+        self.assertEqual(len(picking.move_line_ids), 2)
+        self.assertEqual(picking2.move_lines.state, "assigned")
+        self._backdate_moves()
+        picking2.write({
+            "move_line_ids_without_package": [
+                (
+                    1, picking2.move_line_ids[0].id,
+                    {"manual_lot_id": picking.move_line_ids[0].lot_id.id}
+                ),
+                (
+                    1, picking2.move_line_ids[1].id,
+                    {"manual_lot_id": picking.move_line_ids[1].lot_id.id}
+                ),
+            ],
+        })
+        self.assertEqual(len(picking.move_line_ids), 3)
+        self.assertEqual(picking.move_lines.state, "assigned")
+        self.assertEqual(len(picking2.move_line_ids), 3)
+        self.assertEqual(picking2.move_lines.state, "assigned")
+
+    def test_13_reassign_multiple(self):
+        """This specific reassignment breaks if product_qty is not up to date.
+
+        Having two assigned pickings with a quantity of two, assigning a lot
+        from the first picking to the first picking while assigning the
+        original lot from the assigned move line to the second move line of
+        the same picking should not raise an error.
+        """
+        self._create_quant(qty=4)
+        picking = self._create_picking(2)
+        picking2 = self._create_picking(2)
+        self._backdate_moves()
+        vals = [
+            (1, picking2.move_line_ids[0].id,
+             {"manual_lot_id": picking.move_line_ids[0].lot_id.id}),
+            (1, picking2.move_line_ids[1].id,
+             {"manual_lot_id": picking2.move_line_ids[0].lot_id.id}),
+        ]
+        picking2.write({"move_line_ids_without_package": vals})
+        self.assertEqual(len(picking.move_line_ids), 2)
+        self.assertEqual(picking.move_lines.state, "assigned")
+        self.assertEqual(len(picking2.move_line_ids), 2)
+        self.assertEqual(picking2.move_lines.state, "assigned")
```

## Comparing `odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/METADATA` & `odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/METADATA`

 * *Files 5% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 Metadata-Version: 2.1
 Name: odoo12-addon-stock-move-manual-lot
-Version: 12.0.1.0.0.99.dev3
+Version: 12.0.1.1.0.99.dev7
 Summary: Force the user to manually select a lot
 Home-page: https://github.com/OCA/stock-logistics-workflow
-Author: Hunki Enterprises BV, Odoo Community Association (OCA)
+Author: Hunki Enterprises BV,Opener B.V.,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
+Classifier: Framework :: Odoo :: 12.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.5
 Requires-Dist: odoo12-addon-base-view-inheritance-extension
 Requires-Dist: odoo (<12.1dev,>=12.0a)
 
 =============================
 Enforce manually selected lot
@@ -69,19 +70,21 @@
 Credits
 =======
 
 Authors
 ~~~~~~~
 
 * Hunki Enterprises BV
+* Opener B.V.
 
 Contributors
 ~~~~~~~~~~~~
 
 * Holger Brunn <mail@hunki-enterprises.com> (https://hunki-enterprises.com)
+* Stefan Rijnhart <stefan@opener.amsterdam>
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## Comparing `odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/RECORD` & `odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,24 +1,26 @@
-odoo/addons/stock_move_manual_lot/README.rst,sha256=bC2y4zwsup5ZistBdHAdwclFo7-kzuH8MjrcsvGRCHE,3075
+odoo/addons/stock_move_manual_lot/README.rst,sha256=C3wvUj2wIow-AijRMh-wbX7zUW0H8uW2M2sH7G44kdo,3133
 odoo/addons/stock_move_manual_lot/__init__.py,sha256=UMqjngoac0YEpJhG7ffY2JlsiSV-OYhDY2jwatCo7oI,158
-odoo/addons/stock_move_manual_lot/__manifest__.py,sha256=f9k6evYa__iP-UGoW2UMGxm1jWdH-CX0A3T0mzRSQBc,709
+odoo/addons/stock_move_manual_lot/__manifest__.py,sha256=eBJ0075_GxPx14LnSe31ZwukfYWetHaD50UNJiHCcLU,758
 odoo/addons/stock_move_manual_lot/hooks.py,sha256=FzMcLceNV7u5Lm-q1pLNeak0wE_z15EtY56eb7edGz8,215
-odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot,sha256=z13NRYGqCqAzB-dAe9NU1fNWk2oKfHOrp8wfCBCl8yo,1364
-odoo/addons/stock_move_manual_lot/models/__init__.py,sha256=9E4G2tJwLk6SuVTtWf9_UCS78_bll2IgxGTWC4sPAmw,194
-odoo/addons/stock_move_manual_lot/models/stock_move_line.py,sha256=pi4ZLq_HY2RW02jQF-lAg_jphSCtTAudjnLkZTE9on4,2795
-odoo/addons/stock_move_manual_lot/models/stock_picking.py,sha256=zCg3uS8a0MEJmJ4A7tvmc1_eLHCR6jlf4hioSaTm_Eo,703
+odoo/addons/stock_move_manual_lot/i18n/stock_move_manual_lot.pot,sha256=OuziydijDLNyEgwUpZ5XxX_K_uNommhBU6M9taeGbII,1836
+odoo/addons/stock_move_manual_lot/migrations/12.0.1.1.0/post-migration.py,sha256=CVdM_LNZisT82cwCo054hGnFzk_S484zZCm8J8Y9X9o,577
+odoo/addons/stock_move_manual_lot/models/__init__.py,sha256=5ZnMX-qY230gp7893o01RWAP7Jkl3NIT_0RcXIc5jIc,219
+odoo/addons/stock_move_manual_lot/models/stock_move.py,sha256=bv3pU2IAGHTkeDlUbdIypijYbGpRcDoVSMMajUAkF8Y,507
+odoo/addons/stock_move_manual_lot/models/stock_move_line.py,sha256=ZE_NybIGXsQRTwsUuMD3iWwyQbw11OMDFCE5qb2J-wU,7197
+odoo/addons/stock_move_manual_lot/models/stock_picking.py,sha256=94W5v3v94X1KYTYR3P2d0tVfl2u-GpSWRQBQo0rZvLc,4553
 odoo/addons/stock_move_manual_lot/models/stock_picking_type.py,sha256=_sFPj46mH81nltdajcuQozfmsdk5SoFwbslu8caROOY,273
-odoo/addons/stock_move_manual_lot/readme/CONTRIBUTORS.rst,sha256=LfpZXdFyf-JW7tYqh16QaIiCkFKyUBc4JmpOQrt1cVk,76
+odoo/addons/stock_move_manual_lot/readme/CONTRIBUTORS.rst,sha256=p4IzVpbHyY8B6wDXK9frUKpUdZpUhAx_4Nqh-uvxPa4,120
 odoo/addons/stock_move_manual_lot/readme/DESCRIPTION.rst,sha256=5BdfySt2kcp2HtWKeL4_xyqLd_xb-EAF67xgxvYG-IQ,95
 odoo/addons/stock_move_manual_lot/readme/USAGE.rst,sha256=4WCehxPUqscwWJyLPUSIIlDRR62DWc6y42Q7KUpH5cU,179
 odoo/addons/stock_move_manual_lot/readme/newsfragments/.gitkeep,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 odoo/addons/stock_move_manual_lot/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_move_manual_lot/static/description/index.html,sha256=NL9RpF3OzQmKMBxPIiL9p4krdbG2ShOH7srv40Fnm0w,12440
+odoo/addons/stock_move_manual_lot/static/description/index.html,sha256=wBZiqP2BneXAaWJ_uG1KynlNkMtGfMnRRkiJrqyiafU,12598
 odoo/addons/stock_move_manual_lot/tests/__init__.py,sha256=xTZfnHg-PhtedPntXOMBDdBH4wAPeYRBacJlnjJPpkE,144
-odoo/addons/stock_move_manual_lot/tests/test_stock_move_manual_lot.py,sha256=7u1scQv0HrDUG8-7HMwsBLHn7ebb_JcLSIh5dsYuYNI,4311
+odoo/addons/stock_move_manual_lot/tests/test_stock_move_manual_lot.py,sha256=8n7h1TY2s_xSB010TuNLBFAzZI7KaWcz8iofqnol_tU,17601
 odoo/addons/stock_move_manual_lot/views/stock_move_line.xml,sha256=kG2HHyH5M8a9QUnjArv-Af6DzOgV58RPStAzjfzMwO0,1138
 odoo/addons/stock_move_manual_lot/views/stock_picking.xml,sha256=ZLvW44g3Tek8DHtypJnQW0iSsPH7KeQZk8wLIIxjqgQ,1985
 odoo/addons/stock_move_manual_lot/views/stock_picking_type.xml,sha256=mt2NYWaX3WbEZrQQt23gN3Nl4cmJFuTSjksUhx6VF0A,412
-odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/METADATA,sha256=pTGUg3qWU4K1CuXH9sJ_oiqtVbyZfj1SqNNtMeTHExQ,3686
-odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo12_addon_stock_move_manual_lot-12.0.1.0.0.99.dev3.dist-info/RECORD,,
+odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/METADATA,sha256=8WgsH8EuMKpwBn1HVyecYxqs-Dy3uoBbMs94LBirLnM,3793
+odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo12_addon_stock_move_manual_lot-12.0.1.1.0.99.dev7.dist-info/RECORD,,
```

