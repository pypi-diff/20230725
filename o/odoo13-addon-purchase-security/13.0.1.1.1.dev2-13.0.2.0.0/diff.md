# Comparing `tmp/odoo13_addon_purchase_security-13.0.1.1.1.dev2-py3-none-any.whl.zip` & `tmp/odoo13_addon_purchase_security-13.0.2.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,27 @@
-Zip file size: 25502 bytes, number of entries: 20
--rw-r--r--  2.0 unx     3824 b- defN 21-Dec-08 04:23 odoo/addons/purchase_security/README.rst
--rw-r--r--  2.0 unx        0 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/__init__.py
--rw-r--r--  2.0 unx      604 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/__manifest__.py
--rw-r--r--  2.0 unx      696 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/i18n/es.po
--rw-r--r--  2.0 unx      702 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/i18n/it.po
--rw-r--r--  2.0 unx      499 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/i18n/purchase_security.pot
--rw-r--r--  2.0 unx      219 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/readme/CONFIGURATION.rst
--rw-r--r--  2.0 unx      143 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      221 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      552 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/readme/USAGE.rst
--rw-r--r--  2.0 unx     2501 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/security/security.xml
--rw-r--r--  2.0 unx     9455 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/static/description/icon.png
--rw-r--r--  2.0 unx    13344 b- defN 21-Dec-08 04:23 odoo/addons/purchase_security/static/description/index.html
--rw-r--r--  2.0 unx      104 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/tests/__init__.py
--rw-r--r--  2.0 unx     4341 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/tests/test_access_rights.py
--rw-r--r--  2.0 unx     1212 b- defN 21-Dec-08 04:22 odoo/addons/purchase_security/views/purchase_order_views.xml
--rw-r--r--  2.0 unx     4434 b- defN 21-Dec-08 04:23 odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Dec-08 04:23 odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 21-Dec-08 04:23 odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2128 b- defN 21-Dec-08 04:23 odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/RECORD
-20 files, 45076 bytes uncompressed, 21844 bytes compressed:  51.5%
+Zip file size: 29230 bytes, number of entries: 25
+-rw-r--r--  2.0 unx     3864 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/__init__.py
+-rw-r--r--  2.0 unx      708 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/__manifest__.py
+-rw-r--r--  2.0 unx     3152 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/i18n/es.po
+-rw-r--r--  2.0 unx      702 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/i18n/it.po
+-rw-r--r--  2.0 unx     2755 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/i18n/purchase_security.pot
+-rw-r--r--  2.0 unx       57 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/models/__init__.py
+-rw-r--r--  2.0 unx     1151 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/models/purchase_order.py
+-rw-r--r--  2.0 unx      465 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/models/purchase_team.py
+-rw-r--r--  2.0 unx      219 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/readme/CONFIGURATION.rst
+-rw-r--r--  2.0 unx      183 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      221 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      552 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/readme/USAGE.rst
+-rw-r--r--  2.0 unx      363 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     3888 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/security/security.xml
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/static/description/icon.png
+-rw-r--r--  2.0 unx    13394 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/static/description/index.html
+-rw-r--r--  2.0 unx      104 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/tests/__init__.py
+-rw-r--r--  2.0 unx     6215 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/tests/test_access_rights.py
+-rw-r--r--  2.0 unx     2312 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/views/purchase_order_views.xml
+-rw-r--r--  2.0 unx     1008 b- defN 23-Jul-25 07:31 odoo/addons/purchase_security/views/purchase_team_views.xml
+-rw-r--r--  2.0 unx     4469 b- defN 23-Jul-25 07:31 odoo13_addon_purchase_security-13.0.2.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-25 07:31 odoo13_addon_purchase_security-13.0.2.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-25 07:31 odoo13_addon_purchase_security-13.0.2.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2664 b- defN 23-Jul-25 07:31 odoo13_addon_purchase_security-13.0.2.0.0.dist-info/RECORD
+25 files, 58019 bytes uncompressed, 24688 bytes compressed:  57.4%
```

## zipnote {}

```diff
@@ -12,26 +12,38 @@
 
 Filename: odoo/addons/purchase_security/i18n/it.po
 Comment: 
 
 Filename: odoo/addons/purchase_security/i18n/purchase_security.pot
 Comment: 
 
+Filename: odoo/addons/purchase_security/models/__init__.py
+Comment: 
+
+Filename: odoo/addons/purchase_security/models/purchase_order.py
+Comment: 
+
+Filename: odoo/addons/purchase_security/models/purchase_team.py
+Comment: 
+
 Filename: odoo/addons/purchase_security/readme/CONFIGURATION.rst
 Comment: 
 
 Filename: odoo/addons/purchase_security/readme/CONTRIBUTORS.rst
 Comment: 
 
 Filename: odoo/addons/purchase_security/readme/DESCRIPTION.rst
 Comment: 
 
 Filename: odoo/addons/purchase_security/readme/USAGE.rst
 Comment: 
 
+Filename: odoo/addons/purchase_security/security/ir.model.access.csv
+Comment: 
+
 Filename: odoo/addons/purchase_security/security/security.xml
 Comment: 
 
 Filename: odoo/addons/purchase_security/static/description/icon.png
 Comment: 
 
 Filename: odoo/addons/purchase_security/static/description/index.html
@@ -42,20 +54,23 @@
 
 Filename: odoo/addons/purchase_security/tests/test_access_rights.py
 Comment: 
 
 Filename: odoo/addons/purchase_security/views/purchase_order_views.xml
 Comment: 
 
-Filename: odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/METADATA
+Filename: odoo/addons/purchase_security/views/purchase_team_views.xml
+Comment: 
+
+Filename: odoo13_addon_purchase_security-13.0.2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/WHEEL
+Filename: odoo13_addon_purchase_security-13.0.2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/top_level.txt
+Filename: odoo13_addon_purchase_security-13.0.2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/RECORD
+Filename: odoo13_addon_purchase_security-13.0.2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/purchase_security/README.rst

```diff
@@ -70,14 +70,16 @@
 
 Contributors
 ~~~~~~~~~~~~
 
 * `Tecnativa <https://www.tecnativa.com>`_:
 
   * João Marques
+  * Stefan Ungureanu
+  * Pedro M. Baeza
 * `Solvos <https://www.solvos.es>`_:
 
   * David Alonso <david.alonso@solvos.es>
 
 Maintainers
 ~~~~~~~~~~~
```

## odoo/addons/purchase_security/__init__.py

```diff
@@ -0,0 +1,2 @@
+00000000: 6672 6f6d 202e 2069 6d70 6f72 7420 6d6f  from . import mo
+00000010: 6465 6c73 0a                             dels.
```

## odoo/addons/purchase_security/__manifest__.py

```diff
@@ -1,17 +1,22 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html).
 
 {
     "name": "Purchase Order security",
-    "version": "13.0.1.1.0",
+    "version": "13.0.2.0.0",
     "category": "Purchase",
     "development_status": "Production/Stable",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "summary": "See only your purchase orders",
     "website": "https://github.com/OCA/purchase-workflow",
     "license": "AGPL-3",
     "depends": ["purchase"],
     "maintainers": ["joao-p-marques"],
-    "data": ["security/security.xml", "views/purchase_order_views.xml"],
+    "data": [
+        "security/security.xml",
+        "security/ir.model.access.csv",
+        "views/purchase_order_views.xml",
+        "views/purchase_team_views.xml",
+    ],
     "installable": True,
     "auto_install": False,
 }
```

## odoo/addons/purchase_security/i18n/es.po

```diff
@@ -2,21 +2,98 @@
 # This file contains the translation of the following modules:
 # 	* purchase_security
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: Odoo Server 13.0\n"
 "Report-Msgid-Bugs-To: \n"
-"PO-Revision-Date: 2021-12-07 17:39+0000\n"
-"Last-Translator: David Alonso (Solvos) <david.alonso@solvos.es>\n"
-"Language-Team: none\n"
+"POT-Creation-Date: 2023-07-24 18:38+0000\n"
+"PO-Revision-Date: 2023-07-24 20:39+0200\n"
+"Last-Translator: \n"
+"Language-Team: \n"
 "Language: es\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: \n"
-"Plural-Forms: nplurals=2; plural=n != 1;\n"
-"X-Generator: Weblate 4.3.2\n"
+"Content-Transfer-Encoding: 8bit\n"
+"Plural-Forms: \n"
+"X-Generator: Poedit 3.0.1\n"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__create_uid
+msgid "Created by"
+msgstr "Creado por"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__create_date
+msgid "Created on"
+msgstr "Creado en"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__display_name
+msgid "Display Name"
+msgstr "Nombre mostrado"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__id
+msgid "ID"
+msgstr "ID (identificación)"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team____last_update
+msgid "Last Modified on"
+msgstr "Última modificación en"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__write_uid
+msgid "Last Updated by"
+msgstr "Modificado por"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__write_date
+msgid "Last Updated on"
+msgstr "Última modificación el"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__name
+msgid "Name"
+msgstr "Nombre"
+
+#. module: purchase_security
+#: model:ir.model,name:purchase_security.model_purchase_order
+msgid "Purchase Order"
+msgstr "Pedido de compra"
+
+#. module: purchase_security
+#: model:ir.model,name:purchase_security.model_purchase_team
+msgid "Purchase Team"
+msgstr "Equipo de compra"
+
+#. module: purchase_security
+#: model:ir.actions.act_window,name:purchase_security.action_purchase_team_display
+#: model:ir.ui.menu,name:purchase_security.menu_purchase_team_tree
+msgid "Purchase Teams"
+msgstr "Equipos de compra"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__user_ids
+msgid "Purchase Users"
+msgstr "Usuarios de compra"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__sequence
+msgid "Sequence"
+msgstr "Secuencia"
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_order__team_id
+msgid "Team"
+msgstr "Equipo"
 
 #. module: purchase_security
 #: model:res.groups,name:purchase_security.group_purchase_own_orders
 msgid "User (own orders)"
-msgstr "Usuario (sus propios pedidos)"
+msgstr "Usuario (pedidos propios)"
+
+#. module: purchase_security
+#: model:res.groups,name:purchase_security.group_purchase_group_orders
+msgid "User (team orders)"
+msgstr "Usuario (pedidos del equipo)"
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## odoo/addons/purchase_security/i18n/purchase_security.pot

```diff
@@ -10,10 +10,86 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__create_uid
+msgid "Created by"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__create_date
+msgid "Created on"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__display_name
+msgid "Display Name"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__id
+msgid "ID"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team____last_update
+msgid "Last Modified on"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__write_uid
+msgid "Last Updated by"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__write_date
+msgid "Last Updated on"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__name
+msgid "Name"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model,name:purchase_security.model_purchase_order
+msgid "Purchase Order"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model,name:purchase_security.model_purchase_team
+msgid "Purchase Team"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.actions.act_window,name:purchase_security.action_purchase_team_display
+#: model:ir.ui.menu,name:purchase_security.menu_purchase_team_tree
+msgid "Purchase Teams"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__user_ids
+msgid "Purchase Users"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_team__sequence
+msgid "Sequence"
+msgstr ""
+
+#. module: purchase_security
+#: model:ir.model.fields,field_description:purchase_security.field_purchase_order__team_id
+msgid "Team"
+msgstr ""
+
+#. module: purchase_security
 #: model:res.groups,name:purchase_security.group_purchase_own_orders
 msgid "User (own orders)"
 msgstr ""
+
+#. module: purchase_security
+#: model:res.groups,name:purchase_security.group_purchase_group_orders
+msgid "User (team orders)"
+msgstr ""
```

## odoo/addons/purchase_security/readme/CONTRIBUTORS.rst

```diff
@@ -1,6 +1,8 @@
 * `Tecnativa <https://www.tecnativa.com>`_:
 
   * João Marques
+  * Stefan Ungureanu
+  * Pedro M. Baeza
 * `Solvos <https://www.solvos.es>`_:
 
   * David Alonso <david.alonso@solvos.es>
```

## odoo/addons/purchase_security/security/security.xml

### odoo/addons/purchase_security/security/security.xml

```diff
@@ -2,38 +2,55 @@
 <odoo>
   <data>
     <record id="group_purchase_own_orders" model="res.groups">
       <field name="name">User (own orders)</field>
       <field name="category_id" ref="base.module_category_operations_purchase"/>
       <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
     </record>
+    <record id="group_purchase_group_orders" model="res.groups">
+      <field name="name">User (team orders)</field>
+      <field name="category_id" ref="base.module_category_operations_purchase"/>
+      <field name="implied_ids" eval="[(4, ref('purchase_security.group_purchase_own_orders'))]"/>
+    </record>
     <record id="purchase.group_purchase_manager" model="res.groups">
-      <field name="implied_ids" eval="[(3, ref('purchase.group_purchase_user')), (4, ref('group_purchase_own_orders'))]"/>
+      <field name="implied_ids" eval="[(3, ref('purchase.group_purchase_user')),                 (4, ref('group_purchase_group_orders'))]"/>
     </record>
   </data>
   <data noupdate="1">
     <record model="ir.rule" id="purchase_order_group_purchase_manager_rule">
       <field name="name">View purchase orders (manager)</field>
       <field name="model_id" ref="purchase.model_purchase_order"/>
       <field name="domain_force">[(1, '=', 1)]</field>
       <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
     </record>
     <record model="ir.rule" id="purchase_order_group_purchase_order_own_orders">
       <field name="name">View purchase orders (own responsible)</field>
       <field name="model_id" ref="purchase.model_purchase_order"/>
-      <field name="domain_force">['|',('user_id','=',user.id),('user_id','=',False)]</field>
+      <field name="domain_force">['|',('user_id','=',user.id),'&amp;',('user_id','=',False),('team_id','=',False)]</field>
       <field name="groups" eval="[(4,ref('group_purchase_own_orders'))]"/>
     </record>
+    <record model="ir.rule" id="purchase_order_group_purchase_order_group_orders">
+      <field name="name">View purchase orders (purchase team member)</field>
+      <field name="model_id" ref="purchase.model_purchase_order"/>
+      <field name="domain_force">[('team_id.user_ids', '=', user.id)]</field>
+      <field name="groups" eval="[(4,ref('group_purchase_group_orders'))]"/>
+    </record>
     <record model="ir.rule" id="purchase_order_line_group_purchase_manager_rule">
       <field name="name">View purchase order lines (manager)</field>
       <field name="model_id" ref="purchase.model_purchase_order_line"/>
       <field name="domain_force">[(1, '=', 1)]</field>
       <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
     </record>
     <record model="ir.rule" id="purchase_order_line_group_purchase_order_own_orders">
       <field name="name">View purchase order lines (own responsible)</field>
       <field name="model_id" ref="purchase.model_purchase_order_line"/>
-      <field name="domain_force">['|',('order_id.user_id','=',user.id),('order_id.user_id','=',False)]</field>
+      <field name="domain_force">['|',('order_id.user_id','=',user.id),'&amp;',('order_id.user_id','=',False),('order_id.team_id', '=', False)]</field>
       <field name="groups" eval="[(4,ref('group_purchase_own_orders'))]"/>
     </record>
+    <record model="ir.rule" id="purchase_order_user_group_purchases_rule">
+      <field name="name">View purchase order lines (purchase responsible)</field>
+      <field name="model_id" ref="purchase.model_purchase_order_line"/>
+      <field name="domain_force">[('order_id.team_id.user_ids', '=', user.id)]</field>
+      <field name="groups" eval="[(4, ref('group_purchase_group_orders'))]"/>
+    </record>
   </data>
 </odoo>
```

## odoo/addons/purchase_security/static/description/index.html

### odoo/addons/purchase_security/static/description/index.html

```diff
@@ -473,14 +473,16 @@
           </h2>
           <ul class="simple">
             <li>
               <a class="reference external" href="https://www.tecnativa.com">Tecnativa</a>
               :
               <ul>
                 <li>João Marques</li>
+                <li>Stefan Ungureanu</li>
+                <li>Pedro M. Baeza</li>
               </ul>
             </li>
             <li>
               <a class="reference external" href="https://www.solvos.es">Solvos</a>
               :
               <ul>
                 <li>
```

## odoo/addons/purchase_security/tests/test_access_rights.py

```diff
@@ -1,129 +1,158 @@
 # Copyright 2020 Tecnativa - Víctor Martínez
+# Copyright 2023 Tecnativa - Stefan Ungureanu
+# Copyright 2023 Tecnativa - Pedro M. Baeza
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html).
 
 import logging
 
+from odoo.tests import new_test_user
 from odoo.tests.common import SavepointCase
 
 _logger = logging.getLogger(__name__)
 
 
 class TestPurchaseOrderSecurity(SavepointCase):
     @classmethod
     def setUpClass(cls):
-        super(TestPurchaseOrderSecurity, cls).setUpClass()
+        super().setUpClass()
+        cls.env = cls.env(
+            context=dict(
+                cls.env.context,
+                mail_create_nolog=True,
+                mail_create_nosubscribe=True,
+                mail_notrack=True,
+                no_reset_password=True,
+                tracking_disable=True,
+            )
+        )
+        # Teams
+        cls.team1 = cls.env["purchase.team"].create({"name": "Team1"})
+        cls.team2 = cls.env["purchase.team"].create({"name": "Team2"})
         # Users
-        users = cls.env["res.users"].with_context(no_reset_password=True)
-        group_name = "group_purchase_own_orders"
         # User in group_purchase_own_orders
-        cls.user_group_purchase_own_orders = users.create(
-            {
-                "name": "group_purchase_own_orders",
-                "login": "group_purchase_own_orders",
-                "email": "group_purchase_own_orders@example.com",
-                "groups_id": [
-                    (6, 0, [cls.env.ref("purchase_security.%s" % group_name).id])
-                ],
-            }
+        cls.user_group_purchase_own_orders = new_test_user(
+            cls.env,
+            login="group_purchase_own_orders",
+            groups="purchase_security.group_purchase_own_orders",
+        )
+        # User 1 in group_purchase_group_orders
+        cls.user_group_team_1 = new_test_user(
+            cls.env,
+            login="group_purchase_team_1_orders",
+            groups="purchase_security.group_purchase_group_orders",
+        )
+        # Adding user 1 to both teams
+        cls.team1.write({"user_ids": [(4, cls.user_group_team_1.id)]})
+        cls.team2.write({"user_ids": [(4, cls.user_group_team_1.id)]})
+        # User 2 in group_purchase_group_orders
+        cls.user_group_team_2 = new_test_user(
+            cls.env,
+            login="group_purchase_team_2_orders",
+            groups="purchase_security.group_purchase_group_orders",
+        )
+        # Adding user 2 to only one team
+        cls.team1.write({"user_ids": [(4, cls.user_group_team_2.id)]})
+        # User with group permission but without being assigned to any team
+        cls.user_group_team_3 = new_test_user(
+            cls.env,
+            login="group_purchase_team_3_orders",
+            groups="purchase_security.group_purchase_group_orders",
         )
         # Purchase order user
-        cls.user_po_user = users.create(
-            {
-                "name": "po_user",
-                "login": "po_user",
-                "email": "po_user@example.com",
-                "groups_id": [(6, 0, [cls.env.ref("purchase.group_purchase_user").id])],
-            }
+        cls.user_po_user = new_test_user(
+            cls.env, login="po_user", groups="purchase.group_purchase_user"
         )
         # Purchase order manager
-        cls.user_po_manager = users.create(
-            {
-                "name": "po_manager",
-                "login": "po_manager",
-                "email": "po_manager@example.com",
-                "groups_id": [
-                    (6, 0, [cls.env.ref("purchase.group_purchase_manager").id])
-                ],
-            }
+        cls.user_po_manager = new_test_user(
+            cls.env, login="po_manager", groups="purchase.group_purchase_manager"
         )
         # User without groups
-        cls.user_without_groups = users.create(
-            {
-                "name": "without_groups",
-                "login": "without_groups",
-                "email": "without_groups@example.com",
-                "groups_id": False,
-            }
-        )
+        cls.user_without_groups = new_test_user(cls.env, login="without_groups")
         # Partner for the POs
         cls.partner_po = cls.env["res.partner"].create({"name": "PO Partner"})
         # Purchase Order
         cls.env["purchase.order"].create(
             (
                 {
                     "name": "po_security_1",
                     "partner_id": cls.partner_po.id,
                     "user_id": False,  # No Purchase Representative
+                    "team_id": False,  # No automatic team
                 },
                 {
                     "name": "po_security_2",
                     "user_id": cls.user_po_user.id,
                     "partner_id": cls.partner_po.id,
                 },
                 {
                     "name": "po_security_3",
                     "user_id": cls.user_po_manager.id,
                     "partner_id": cls.partner_po.id,
+                    "team_id": cls.team1.id,
                 },
                 {
                     "name": "po_security_4",
                     "user_id": cls.user_group_purchase_own_orders.id,
                     "partner_id": cls.partner_po.id,
+                    "team_id": cls.team2.id,
                 },
             )
         )
 
+    def test_po_auto_team(self):
+        order = self.env["purchase.order"].search([("name", "=", "po_security_2")])
+        self.assertEqual(order.team_id, self.team1)
+
     def test_access_user_user_group_purchase_own_orders(self):
         # User in group should have access to it's own PO
         # and to those w/o Purchase Representative
         self.assertEqual(
             len(
                 self.env["purchase.order"]
                 .with_user(self.user_group_purchase_own_orders)
-                .search([])
-                .ids
+                .search([("name", "like", "po_security")])
             ),
             2,
         )
 
+    def _search_test_purchase_orders(self, user):
+        return (
+            self.env["purchase.order"]
+            .with_user(user)
+            .search([("name", "like", "po_security")])
+        )
+
     def test_access_user_po_user(self):
         # Normal PO user should have access to all of them
         # because he is not in group
-        self.assertEqual(
-            len(
-                self.env["purchase.order"]
-                .with_user(self.user_po_user)
-                .search([("name", "like", "po_security")])
-                .ids
-            ),
-            4,
-        )
+        self.assertEqual(len(self._search_test_purchase_orders(self.user_po_user)), 4)
 
     def test_access_user_po_manager(self):
         # Manager PO user should have access to all of them
         self.assertEqual(
-            len(
-                self.env["purchase.order"]
-                .with_user(self.user_po_manager)
-                .search([("name", "like", "po_security")])
-                .ids
-            ),
-            4,
+            len(self._search_test_purchase_orders(self.user_po_manager)), 4
+        )
+
+    def test_access_user_user_group_purchase_group_orders_1(self):
+        # User in group should have access PO's without any team assigned,
+        # and to those to whose team he belongs. In this case, it belongs to
+        # both teams
+        self.assertEqual(
+            len(self._search_test_purchase_orders(self.user_group_team_1)), 4
+        )
+
+    def test_access_user_user_group_purchase_group_orders_2(self):
+        # User in group should have access PO's without any team assigned,
+        # and to those to whose team he belongs. In this case, it belongs to
+        # only one team, so the other order won't be seen
+        self.assertEqual(
+            len(self._search_test_purchase_orders(self.user_group_team_2)), 3
         )
 
-    def test_access_user_without_groups(self):
-        # User without groups should not have access to POs
+    def test_access_user_user_group_purchase_group_orders_3(self):
+        # User in group should have access PO's without any team assigned,
+        # and to those to whose team they belongs. In this case, it does not
+        # belongs to any team, so the other orders won't be seen
         self.assertEqual(
-            len(self.env["purchase.order"].with_user(self.user_without_groups).read()),
-            0,
+            len(self._search_test_purchase_orders(self.user_group_team_3)), 1
         )
```

## odoo/addons/purchase_security/views/purchase_order_views.xml

### odoo/addons/purchase_security/views/purchase_order_views.xml

```diff
@@ -19,8 +19,29 @@
     <field name="groups_id" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
     <field name="arch" type="xml">
       <field name="user_id" position="attributes">
         <attribute name="readonly">0</attribute>
       </field>
     </field>
   </record>
+  <record model="ir.ui.view" id="purchase_order_form_view">
+    <field name="name">purchase.order.form</field>
+    <field name="model">purchase.order</field>
+    <field name="inherit_id" ref="purchase.purchase_order_form"/>
+    <field name="arch" type="xml">
+      <xpath expr="//field[@name='user_id']" position="after">
+        <field name="team_id" readonly="1"/>
+      </xpath>
+    </field>
+  </record>
+  <record id="purchase_order_form_all_group_orders" model="ir.ui.view">
+    <field name="name">purchase.order.form (all orders)</field>
+    <field name="model">purchase.order</field>
+    <field name="inherit_id" ref="purchase.purchase_order_form"/>
+    <field name="groups_id" eval="[(4, ref('purchase.group_purchase_manager')),(4, ref('purchase_security.group_purchase_group_orders'))]"/>
+    <field name="arch" type="xml">
+      <field name="team_id" position="attributes">
+        <attribute name="readonly">0</attribute>
+      </field>
+    </field>
+  </record>
 </odoo>
```

## Comparing `odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/METADATA` & `odoo13_addon_purchase_security-13.0.2.0.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo13-addon-purchase-security
-Version: 13.0.1.1.1.dev2
+Version: 13.0.2.0.0
 Summary: See only your purchase orders
 Home-page: https://github.com/OCA/purchase-workflow
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -87,14 +87,16 @@
 
 Contributors
 ~~~~~~~~~~~~
 
 * `Tecnativa <https://www.tecnativa.com>`_:
 
   * João Marques
+  * Stefan Ungureanu
+  * Pedro M. Baeza
 * `Solvos <https://www.solvos.es>`_:
 
   * David Alonso <david.alonso@solvos.es>
 
 Maintainers
 ~~~~~~~~~~~
```

## Comparing `odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/RECORD` & `odoo13_addon_purchase_security-13.0.2.0.0.dist-info/RECORD`

 * *Files 13% similar despite different names*

```diff
@@ -1,20 +1,25 @@
-odoo/addons/purchase_security/README.rst,sha256=i_E_WlFkb_trDR6k6CkLh6QrEOl4ZRC8uTPPRdWyQ1U,3824
-odoo/addons/purchase_security/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-odoo/addons/purchase_security/__manifest__.py,sha256=_QtMIxNYONmVBDgCOK6vLuFicDBxwn90ZtzD7LIUtTs,604
-odoo/addons/purchase_security/i18n/es.po,sha256=7K-01I3M7CgB8oToM4wzgFLQbIh9vheDpEyuPpGr6Qk,696
+odoo/addons/purchase_security/README.rst,sha256=sVp2BBRjs8Dr47aRI09UC-k0j35xSW8z6qS_4LLdc1Y,3864
+odoo/addons/purchase_security/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
+odoo/addons/purchase_security/__manifest__.py,sha256=6V--hSiWzhgQg0wbXH7pm2fX0of15yCDwrEaaSxnUd4,708
+odoo/addons/purchase_security/i18n/es.po,sha256=3sdDiqRH1oqmhrhR1-PGhtDwS1MD5j5BJWSRdJzD2gE,3152
 odoo/addons/purchase_security/i18n/it.po,sha256=Uke-Nl-w53x3-yKA0iYx-2lY2UYVVjmcgnBohh6iH4I,702
-odoo/addons/purchase_security/i18n/purchase_security.pot,sha256=Rk0HAlSSpb-u4df6UbI89diqnLExGJhdMs1veQhT05Q,499
+odoo/addons/purchase_security/i18n/purchase_security.pot,sha256=h9zNj_b5hOkibV4skivxFgoIoMRJvkPKCWjCb7LWjU4,2755
+odoo/addons/purchase_security/models/__init__.py,sha256=VN5jBd5Vha7hdnd3eFkmYLKTtjqiKctLyMzPO71Jvuk,57
+odoo/addons/purchase_security/models/purchase_order.py,sha256=d_Y9gD3vTXWQ7Hjkwtyv8xFQUTfs26Xs7FLu0DIkRRQ,1151
+odoo/addons/purchase_security/models/purchase_team.py,sha256=IyznwfTotVEKNIHprhWsMd_0G5km0baYZRQxSxqB8O4,465
 odoo/addons/purchase_security/readme/CONFIGURATION.rst,sha256=sSmzJgRDWY5N5hmrZWoW2vCvbNiSaeBZ_w-Sln6YBAc,219
-odoo/addons/purchase_security/readme/CONTRIBUTORS.rst,sha256=XQzS57KxYCcEw242tWQMStmHefVLSQpnJ9i9IXlNKlM,143
+odoo/addons/purchase_security/readme/CONTRIBUTORS.rst,sha256=UumcNyE_iNq2dBsxlGeVq7QCziwJ5LbKba0Fp1WkISU,183
 odoo/addons/purchase_security/readme/DESCRIPTION.rst,sha256=02Q_a2g9uIWjgMVcAetCwlqyykNmYnIN-F_zdXEj9u0,221
 odoo/addons/purchase_security/readme/USAGE.rst,sha256=4g0oDblrCf-ydWxCK4RIqMfgDP2TAKgkn1tdkTQebsc,552
-odoo/addons/purchase_security/security/security.xml,sha256=MYdWIi8DZWZP9TWqjTVyErgrImHcTjHqJsxPsd_iIvk,2501
+odoo/addons/purchase_security/security/ir.model.access.csv,sha256=S35ZyUyfta3r7WfD2cZvtRNj7c86wWfJodhcNe8WjF0,363
+odoo/addons/purchase_security/security/security.xml,sha256=t2ba2VIBUsGhR45SoTVDV15BMkdDH7a1WkWcs_mzDN0,3888
 odoo/addons/purchase_security/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/purchase_security/static/description/index.html,sha256=b8xg0fEMnsiO3z8HW5u-a6J3pD3bDQxv9mKu-4KZpFI,13344
+odoo/addons/purchase_security/static/description/index.html,sha256=CAypmXBk7EnGqEQlyyI9S3MX4SQ0sCy6dvD5OtFBiyM,13394
 odoo/addons/purchase_security/tests/__init__.py,sha256=mexliz6FIN9VWAC2i3mgJzAhAE3POs4SNAMUM37lXZg,104
-odoo/addons/purchase_security/tests/test_access_rights.py,sha256=uplXpNdRt1OKdVdHefEqhkPk_n0YWtbrZk7t1myOjkQ,4341
-odoo/addons/purchase_security/views/purchase_order_views.xml,sha256=O8dPcDQfIVRXf7kr4EMWMSAi0qM9xZws5McPleBweOk,1212
-odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/METADATA,sha256=wWEU5USUGAOnLYmsxap0vz43SLDhCZxAWWjXCofVSRk,4434
-odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo13_addon_purchase_security-13.0.1.1.1.dev2.dist-info/RECORD,,
+odoo/addons/purchase_security/tests/test_access_rights.py,sha256=gcyv4dBTmXgzecsbSDodoVm3x4sLlRp5gQB8vOS8omY,6215
+odoo/addons/purchase_security/views/purchase_order_views.xml,sha256=wAr5o6tYsEm_tA_d1YtBtENsbcWysJsqDhufG2J3KQs,2312
+odoo/addons/purchase_security/views/purchase_team_views.xml,sha256=zPxm-YFxL6iXcIuan-b5GP3tJ2Jbdx2nXFcZ9BcMRiQ,1008
+odoo13_addon_purchase_security-13.0.2.0.0.dist-info/METADATA,sha256=EPtP4Gsd_nIyX7NH9X_DAlV1fcjM3E1lj4MGwlcx98M,4469
+odoo13_addon_purchase_security-13.0.2.0.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo13_addon_purchase_security-13.0.2.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo13_addon_purchase_security-13.0.2.0.0.dist-info/RECORD,,
```

